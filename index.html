<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="The Empire Holds. Campaign archives, maps, and session notes for Imperial Grayhawk.">
    <meta name="theme-color" content="#8b7355">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Imperial Grayhawk">
    <title>Imperial Grayhawk - Campaign Archive</title>
    <link rel="icon" type="image/png" href="Imperial_Shield.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=IM+Fell+DW+Pica:ital@0;1&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="page-frame">
        <div class="ornate-border">
            <div class="container">
                <header role="banner">
                    <h1>Imperial Grayhawk</h1>
                    <p class="tagline">The Empire Holds.</p>
                    <div class="header-divider" aria-hidden="true">
                        <img src="assets/star.png" alt="" class="divider-star">
                        <span class="divider-line"></span>
                        <img src="Imperial_Shield.png" alt="Imperial Shield of Grayhawk" class="header-logo">
                        <span class="divider-line"></span>
                        <img src="assets/star.png" alt="" class="divider-star">
                    </div>
                </header>

                <div class="welcome-text">
                    <h2>Welcome to the Empire of Greyhawk</h2>
                    <p>Within these archives lie the maps, documents, and chronicles of our ongoing campaign through the
                        grim and perilous lands of the Empire. May these resources aid you in your adventures.</p>
                </div>

                <div class="section-divider" aria-hidden="true">
                    <span>◆</span>
                </div>

                <main id="main-content" role="main">
                    <section id="maps" aria-labelledby="maps-heading">
                        <h2 id="maps-heading">Maps</h2>
                        <div class="resource-grid">
                            <a href="maps/The Empire of Grayhawk.jpg" class="resource-card" target="_blank">
                                <div class="resource-info">
                                    <h3>The Empire of Grayhawk</h3>
                                    <p>The vast realm and its territories</p>
                                </div>
                            </a>
                            <a href="maps/On the road to Northkeep.PNG" class="resource-card" target="_blank">
                                <div class="resource-info">
                                    <h3>On the road to Northkeep</h3>
                                    <p>The treacherous path to Northkeep</p>
                                </div>
                            </a>
                            <a href="maps/northkeep.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Northkeep</h3>
                                    <p>The Last Bastion of the Northeastern Marches</p>
                                </div>
                            </a>
                        </div>
                    </section>

                    <div class="section-divider" aria-hidden="true">
                        <span>◆</span>
                    </div>

                    <section id="handouts" aria-labelledby="handouts-heading">
                        <h2 id="handouts-heading">Handouts</h2>
                        <div class="resource-grid">
                            <a href="handouts/The Empire Of Grayhawk Gazetter.pdf" class="resource-card"
                                target="_blank">
                                <div class="resource-info">
                                    <h3>The Empire of Grayhawk Gazetteer</h3>
                                    <p>A comprehensive guide to the Empire's lands, peoples, and customs</p>
                                </div>
                            </a>
                            <a href="handouts/Keep on the Borderlands overworld - areas of interest.png" class="resource-card"
                                target="_blank">
                                <div class="resource-info">
                                    <h3>Patrol- Areas of Interest</h3>
                                    <p>A map with areas of interest highlighted by Dwern</p>
                                </div>
                            </a>
                            <a href="handouts/symbol_wheel.jpg" class="resource-card" target="_blank">
                                <div class="resource-info">
                                    <h3>The Symbol Wheel</h3>
                                    <p>A mysterious wheel bearing unknown symbols</p>
                                </div>
                            </a>
                            <a href="handouts/half_decoded_message.jpg" class="resource-card" target="_blank">
                                <div class="resource-info">
                                    <h3>Half-Decoded Message</h3>
                                    <p>An encoded missive — partially deciphered, its full meaning still hidden</p>
                                </div>
                            </a>
                        </div>
                    </section>

                    <div class="section-divider" aria-hidden="true">
                        <span>◆</span>
                    </div>

                    <section id="npcs" aria-labelledby="npcs-heading">
                        <h2 id="npcs-heading">NPCs</h2>
                        <div class="resource-grid">
                            <a href="npcs/dorian.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Dorian</h3>
                                    <p>Husband of Nerys and Fisherman</p>
                                </div>
                            </a>
                            <a href="npcs/dwern.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Dwern</h3>
                                    <p>Captain of the Guards</p>
                                </div>
                            </a>
                            <a href="npcs/ferric.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Ferric</h3>
                                    <p>Harried Monk of Prelor</p>
                                </div>
                            </a>
                            <a href="npcs/haldryk.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Haldryk</h3>
                                    <p>Innkeep</p>
                                </div>
                            </a>
                            <a href="npcs/ivlis.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Ivlis</h3>
                                    <p>High Priestess of the Church of Prelor (Missing)</p>
                                </div>
                            </a>
                            <a href="npcs/mallyn.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Mallyn</h3>
                                    <p>Young Woman Starting on Her Great Adventure</p>
                                </div>
                            </a>
                            <a href="npcs/nerys.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Nerys</h3>
                                    <p>Sister to Ivlis and Wife to Dorian</p>
                                </div>
                            </a>
                            <a href="npcs/tomas.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Tomas</h3>
                                    <p>Missing Messenger</p>
                                </div>
                            </a>
                            <a href="npcs/umbrusk.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Umbrusk</h3>
                                    <p>Barkeep</p>
                                </div>
                            </a>
                            <a href="npcs/winvarle.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Winvarle</h3>
                                    <p>Earl of Northkeep</p>
                                </div>
                            </a>
                            <a href="npcs/zahir.html" class="resource-card">
                                <div class="resource-info">
                                    <h3>Zahir of Ket</h3>
                                    <p>Cartographer, Merchant's Guild of Ket</p>
                                </div>
                            </a>
                        </div>
                    </section>

                    <div class="section-divider" aria-hidden="true">
                        <span>◆</span>
                    </div>

                    <section id="notes" aria-labelledby="notes-heading">
                        <h2 id="notes-heading">Session Notes</h2>
                        <div class="resource-grid">
                            <a href="sessions/session1.html" class="resource-card"
                                >
                                <div class="resource-info">
                                    <h3>Session 1</h3>
                                    <p>The Ballad of the Bell and the Bandits</p>
                                </div>
                            </a>
                            <a href="sessions/session2.html" class="resource-card"
                                >
                                <div class="resource-info">
                                    <h3>Session 2</h3>
                                    <p>View session notes</p>
                                </div>
                            </a>
                        </div>
            </div>
            </section>
            </main>

            <footer role="contentinfo">
                <div class="footer-decorations" aria-hidden="true">
                    <span class="footer-line"></span>
                    <img src="assets/seal.png" alt="" class="wax-seal">
                    <span class="footer-line"></span>
                </div>
                <p>May your blades stay sharp and your torches burn bright.</p>
            </footer>
            <img src="assets/stamp.png" alt="" class="approval-stamp" aria-hidden="true">
        </div>
    </div>
    </div>

    <script>
        /* Temporary cleanup registration script
           - Registers a temporary cleanup service worker at ./sw.js which will
             clear caches and unregister itself on activation.
           - Also attempts to immediately unregister any existing registrations
             and clear client caches for visitors who already have an older SW.
           Remove this script after a few days once users have been refreshed. */
        (function(){
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    // Register the temporary cleanup SW (no scope required)
                    navigator.serviceWorker.register('./sw.js').then((reg) => {
                        console.log('Cleanup service worker registered:', reg);
                    }).catch((err) => {
                        console.warn('Cleanup service worker register failed:', err);
                    });

                    // Immediately try to unregister existing SWs and clear caches for this session
                    navigator.serviceWorker.getRegistrations().then((regs) => {
                        if (regs.length) {
                            regs.forEach(r => r.unregister());
                            if (window.caches) {
                                caches.keys().then(keys => Promise.all(keys.map(k => caches.delete(k))));
                            }
                            // Give the browser a moment, then reload to fetch fresh assets
                            setTimeout(() => location.reload(), 800);
                        }
                    });
                });

                // Optional: listen for messages from the cleanup SW to reload if advised
                navigator.serviceWorker.addEventListener('message', (ev) => {
                    if (ev.data && ev.data.action === 'cleanup-reload') {
                        location.reload();
                    }
                });
            }
        })();
    </script>

</body>

</html>